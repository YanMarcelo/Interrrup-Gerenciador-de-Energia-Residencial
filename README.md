‚ö° Interrup - Gerenciador de Energia Residencial(Substitua este link por uma captura de tela real do seu Dashboard)Monitoramento inteligente de consumo el√©trico com IoT e Dashboard moderno.O Interrup √© uma solu√ß√£o completa de IoT (Internet das Coisas) para monitoramento de energia el√©trica em tempo real. Ele combina um hardware baseado em ESP32 (para leitura de sensores) com uma interface web moderna em Next.js, permitindo que o usu√°rio visualize o consumo (Watts), tens√£o (Volts) e corrente (Amperes), al√©m de gerenciar c√¥modos e visualizar hist√≥ricos de consumo.üöÄ Funcionalidadesüìä Dashboard em Tempo Real: Visualiza√ß√£o instant√¢nea de pot√™ncia, tens√£o e corrente.üîå Integra√ß√£o IoT: Leitura direta de sensores via ESP32 com comunica√ß√£o Wi-Fi.üè† Gerenciamento de C√¥modos: Crie, edite e exclua √°reas da casa (Sala, Cozinha, Quarto).üìà Gr√°ficos Din√¢micos: Hist√≥rico de consumo di√°rio (00h √†s 23h) que preenche conforme o tempo passa.‚ö†Ô∏è Sistema de Alertas: Notifica√ß√£o visual autom√°tica quando o consumo ultrapassa n√≠veis seguros/econ√¥micos.üîÑ Modo H√≠brido: O sistema funciona conectado ao sensor ou em Modo Simula√ß√£o (gera dados matem√°ticos caso o hardware esteja desconectado).üì± Design Responsivo: Interface adaptada para Desktop e Mobile.üõ†Ô∏è Tecnologias UtilizadasFrontend (Aplica√ß√£o Web)Framework: Next.js 14+ (App Router)Linguagem: TypeScriptEstiliza√ß√£o: Tailwind CSSComponentes UI: Shadcn/ui√çcones: Tabler IconsGerenciamento de Estado: React Context APIHardware & FirmwareMicrocontrolador: ESP32 (Dual Core)Framework: Arduino / PlatformIOBibliotecas:EmonLib: C√°lculos RMS de tens√£o e corrente.FreeRTOS: Gerenciamento de multitarefa (Wi-Fi no Core 0, Medi√ß√£o no Core 1).WebServer: API RESTful JSON.üì¶ Hardware Necess√°rioPara montar a parte f√≠sica do projeto, voc√™ precisar√° de:ComponenteFun√ß√£oESP32 DevKit V1C√©rebro do sistema e conex√£o Wi-Fi.Sensor SCT-013-000Transformador de corrente n√£o invasivo (at√© 100A).Sensor ZMPT101BM√≥dulo sensor de tens√£o AC.Resistores/CapacitoresPara o circuito de offset (tens√£o DC) do SCT-013.Fonte 5VPara alimentar o ESP32 (via USB).Pinagem (Configura√ß√£o Padr√£o)Pino 34 (ADC1): Leitura do Sensor de Corrente (SCT-013).Pino 35 (ADC1): Leitura do Sensor de Tens√£o (ZMPT101B).Nota: Utilizamos pinos do ADC1 pois o ADC2 √© desativado quando o Wi-Fi do ESP32 est√° em uso.‚öôÔ∏è Instala√ß√£o e Configura√ß√£o1. Configurando o Firmware (ESP32)Instale o VS Code e a extens√£o PlatformIO.Abra a pasta do firmware e localize o arquivo main.cpp (ou src/main.cpp).Edite as credenciais Wi-Fi:C++const char* ssid = "NOME_DA_SUA_REDE";
const char* password = "SENHA_DA_SUA_REDE";
Conecte o ESP32 via USB e clique em Upload (Seta ‚Üí).Abra o Monitor Serial e anote o IP exibido (Ex: 192.168.1.15).2. Configurando o Frontend (Site)Clone este reposit√≥rio:Bashgit clone https://github.com/seu-usuario/interrup.git
cd interrup
Instale as depend√™ncias:Bashnpm install
# ou
yarn install
Configure o IP do ESP32:Abra o arquivo contexts/room-context.tsx.Localize a constante ESP32_IP e insira o IP anotado anteriormente:TypeScriptconst ESP32_IP = "http://192.168.1.15";
Rode o projeto:Bashnpm run dev
Acesse http://localhost:3000 no seu navegador.üß† Arquitetura do SistemaO projeto utiliza uma arquitetura desacoplada onde o ESP32 atua como uma API REST, e o Frontend atua como o cliente consumidor.Multitarefa (ESP32):Task 1 (Core 1): Realiza leituras anal√≥gicas pesadas (calcVI) a cada segundo.Task 2 (Core 0): Mant√©m o servidor Web ativo e responde requisi√ß√µes HTTP.Mutex: Garante que os dados n√£o sejam corrompidos durante a leitura/escrita simult√¢nea.Ciclo de Dados (Frontend):O RoomContext faz polling (busca autom√°tica) na rota /api/leitura a cada 2 segundos.Se o ESP32 responder, os dados reais s√£o exibidos.Se o ESP32 n√£o responder (timeout/erro), o sistema entra em Modo Simula√ß√£o, gerando dados fict√≠cios para fins de demonstra√ß√£o.
